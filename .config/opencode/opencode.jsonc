{
  "$schema": "https://opencode.ai/config.json",
  "default_agent": "build",
  "tui": {
    "scroll_speed": 3,
    "scroll_acceleration": {
      "enabled": false
    },
    "diff_style": "auto"
  },
  "permission": {
    "read": {
      "~/.config/fish/includes/private-vars.fish": "deny"
    }
  },
  // TODO: add:
  // - add sketchybar output with GET route, and implement in sketchybar
  // - add formatter configuration, per project? (prettier, eslint, biome)
  // - create tmux plugins to list panes with agents, and their statuses, PID, kill ability.
  // - add custom tools for aircall?
  // - think about adding prd.json persited equivalent with session_id?
  "agent": {
    "DELEG_ORCHESTRATOR": {
      "description": "Opus orchestrator that delegates to subagents. Minimizes main-context usage.",
      "mode": "primary",
      "reasoningEffort": "max",
      "model": "anthropic/claude-opus-4-6",
      "permission": {
        "*": "deny",
        "read": "allow",
        "edit": "allow",
        "write": "allow",
        "todowrite": "allow",
        "todoread": "allow",
        "question": "allow",
        "external_directory": {
          "*": "ask",
          "~/.config/opencode/plans/*": "allow",
          "/tmp/*": "allow"
        },
        "bash": {
          "fish -c \"agent-browser *": "allow"
        },
        "AircallStagingAuthToken": "allow",
        "skill": {
          "agent-browser-aircall-local": "allow"
        },
        "task": {
          "DELEG_*": "allow",
          "DELEG_ORCHESTRATOR": "allow",
          "explore": "allow",
          "general": "allow",
        },
      },
      "prompt": "{file:./prompts/DELEG_ORCHESTRATOR.md}"
    },
    "DELEG_PLAN": {
      "description": "A restricted agent designed for planning and analysis. Produces detailed execution plans referencing DELEG_* subagents with dependency graphs.",
      "mode": "primary",
      "model": "openai/gpt-5.3-codex",
      // OpenAI reasoningEffort settings
      "reasoningEffort": "xhigh",
      "temperature": 0.3,
      "permission": {
        "*": "deny",
        "read": "allow",
        "glob": "allow",
        "grep": "allow",
        "todowrite": "allow",
        "todoread": "allow",
        "question": "allow",
        "webfetch": "allow",
        "websearch": "allow",
        "lsp": "allow",
        "external_directory": {
          "*": "ask",
          "~/.config/opencode/plans/*": "allow",
          "/tmp/*": "allow"
        },
        "bash": "ask",
        "CreatePlan": "allow",
        "task": {
          "DELEG_*": "allow",
          "explore": "allow"
        },
        "skill": {
          "agent-browser-aircall-local": "ask"
        },
      },
      "prompt": "{file:./prompts/DELEG_PLAN.md}"
    },
    "DELEG_WEB": {
      "description": "Web research using WebSearch/WebFetch. Extracts authoritative sections and returns concise factual summary with sources.",
      "mode": "subagent",
      "hidden": true,
      "model": "anthropic/claude-sonnet-4-5",
      "temperature": 0.2,
      "permission": {
        "*": "deny",
        "websearch": "allow",
        "webfetch": "allow",
      },
      "prompt": "{file:./prompts/DELEG_WEB.md}"
    },
    "DELEG_SHELL": {
      "description": "Runs Bash commands and reports results succinctly (command, exit status, trimmed output). No file edits.",
      "mode": "subagent",
      "hidden": true,
      "model": "anthropic/claude-haiku-4-5",
      "temperature": 0.1,
      "permission": {
        "*": "deny",
        "bash": "allow",
      },
      "prompt": "{file:./prompts/DELEG_SHELL.md}"
    },
    "DELEG_FILE_SEARCH": {
      "description": "Fast repo discovery using Glob/Grep. Returns relevant file paths + pointers (line ranges) and concise factual bullets.",
      "mode": "subagent",
      "hidden": true,
      "model": "anthropic/claude-haiku-4-5",
      "temperature": 0.1,
      "permission": {
        "*": "deny",
        "glob": "allow",
        "grep": "allow",
      },
      "prompt": "{file:./prompts/DELEG_FILE_SEARCH.md}"
    },
    "DELEG_CODE_SIMPLIFIER": {
      "description": "Refines *already-modified* code for clarity, consistency, and maintainability while preserving exact behavior. Produces minimal diffs + pointers.",
      "mode": "subagent",
      "hidden": true,
      "model": "anthropic/claude-opus-4-6",
      "temperature": 0.1,
      "permission": {
        "*": "deny",
        "read": "allow",
        "grep": "allow",
        "edit": "allow",
      },
      "prompt": "{file:./prompts/DELEG_CODE_SIMPLIFIER.md}"
    },
    "DELEG_REVIEW": {
      "description": "High-rigor reviewer for correctness, edge cases, security/perf, and test gaps. Produces prioritized findings with pointers.",
      "mode": "subagent",
      "hidden": true,
      "model": "anthropic/claude-opus-4-6",
      "temperature": 0.1,
      "permission": {
        "*": "deny",
        "read": "allow",
        "grep": "allow",
      },
      "prompt": "{file:./prompts/DELEG_REVIEW.md}"
    },
    // I had to update the .zshenv, since I am using fish
    "DELEG_TEST": {
      "description": "Test runner specialist. Runs tests, parses failures, reports coverage. Never uses watch mode.",
      "mode": "subagent",
      "hidden": true,
      "model": "anthropic/claude-haiku-4-5",
      "temperature": 0.1,
      "permission": {
        "*": "deny",
        "bash": {
          "pnpm test *": "allow",
          "yarn test *": "allow",
          "bun test *": "allow",
          "npm run test *": "allow",
          "pnpm jest *": "allow",
          "yarn jest *": "allow",
          "bun jest *": "allow",
          "npm run jest *": "allow",
          "pnpm vitest *": "allow",
          "yarn vitest *": "allow",
          "bun vitest *": "allow",
          "npm run vitest *": "allow"
        },
      },
      "prompt": "{file:./prompts/DELEG_TEST.md}"
    },
    "DELEG_GIT": {
      "description": "Git operations specialist. Handles status, diff, commits, branches, logs. No co-authorship metadata.",
      "mode": "subagent",
      "hidden": true,
      "model": "anthropic/claude-haiku-4-5",
      "temperature": 0.1,
      "permission": {
        "*": "deny",
        "bash": {
          "git *": "allow",
          "git rm *": "ask",
          "git reset --hard *": "ask"
        },
      },
      "prompt": "{file:./prompts/DELEG_GIT.md}"
    },
    "DELEG_SUMMARIZE": {
      "description": "Summarizes files/code regions and returns concise pointers. Use for exploratory reads to save tokens.",
      "mode": "subagent",
      "hidden": true,
      "model": "anthropic/claude-haiku-4-5",
      "temperature": 0.1,
      "permission": {
        "*": "deny",
        "read": "allow",
      },
      "prompt": "{file:./prompts/DELEG_SUMMARIZE.md}"
    },
    "DELEG_PKG_TYPES": {
      "description": "Retrieve type definitions and API signatures from installed packages in node_modules.",
      "mode": "subagent",
      "hidden": true,
      "model": "anthropic/claude-haiku-4-5",
      "temperature": 0.1,
      "permission": {
        "*": "deny",
        "glob": "allow",
        "grep": "allow",
        "read": "allow",
      },
      "prompt": "{file:./prompts/DELEG_PKG_TYPES.md}"
    },
    "DELEG_LSP_ACTION": {
      "description": "LSP operations specialist. Handles hover, go-to-definition, find-references, implementations, call hierarchy, and symbol searches.",
      "mode": "subagent",
      "hidden": true,
      "model": "anthropic/claude-haiku-4-5",
      "temperature": 0.1,
      "permission": {
        "*": "deny",
        "lsp": "allow",
      },
      "prompt": "{file:./prompts/DELEG_LSP_ACTION.md}"
    },
    "DELEG_FIGMA": {
      "description": "Figma design operations. Extracts design context, generates UI code, manages Code Connect mappings, and captures screenshots.",
      "mode": "subagent",
      "hidden": true,
      "model": "anthropic/claude-sonnet-4-5",
      "temperature": 0.1,
      "permission": {
        "*": "deny",
        "figma_get_design_context": "allow",
        "figma_get_screenshot": "allow",
        "figma_get_metadata": "allow",
        "figma_get_variable_defs": "allow",
        "figma_get_code_connect_map": "allow",
        "figma_add_code_connect_map": "allow",
        "figma_get_strategy_for_mapping": "allow",
        "figma_send_get_strategy_response": "allow",
        "figma_create_design_system_rules": "allow",
        "figma_get_figjam": "allow",
      },
      "prompt": "{file:./prompts/DELEG_FIGMA.md}"
    }
  },
  "keybinds": {
    "input_delete_to_line_end": "none",
    "input_delete_to_line_start": "none",
    "input_line_home": "none",
    "input_line_end": "none",
    "input_visual_line_home": "none",
    "input_visual_line_end": "none",
    "input_newline": "alt+return",
    "messages_line_up": "ctrl+up",
    "messages_line_down": "ctrl+down",
    "messages_first": "ctrl+shift+up",
    "messages_last": "ctrl+shift+down",
    "messages_next": "ctrl+n",
    "messages_previous": "ctrl+shift+n",
    "app_exit": "ctrl+c",
    "editor_open": "<leader>e",
  },
  "mcp": {
    "figma": {
      "type": "remote",
      "url": "http://127.0.0.1:3845/mcp",
      "enabled": true
    },
    "exa": {
      "type": "remote",
      "url": "https://mcp.exa.ai/mcp",
      "headers": {}
    }
  },
  "lsp": {
    "typescript": {
      "disabled": true
    },
    "vtsls-lsp": {
      "command": [
        "vtsls",
        "--stdio"
      ],
      "extensions": [
        ".tsx",
        ".ts",
        ".jsx",
        ".js"
      ]
    }
  },
  "plugin": [
    "cc-safety-net",
    "./plugins/agent-gossips",
    "./plugins/sound-notification"
  ]
}
